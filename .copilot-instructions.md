# 🎯 Copilot Development Instructions - WoodCrave Artisan Platform

## 📋 Project Overview & Mission

This is a **premium woodcarving artisan website** representing luxury craftsmanship through digital excellence. Built with enterprise-grade technologies and modern web standards to showcase heritage woodworking artistry.

### 🎨 Brand Identity & Values
- **Heritage Craftsmanship**: 37+ years of traditional woodworking excellence
- **Luxury Positioning**: High-end bespoke commissions and heirloom pieces
- **Sustainability Focus**: Certified sustainable wood sourcing
- **Global Reach**: International collectors and architectural clients

### 🏆 Quality Standards
- **Performance**: Core Web Vitals optimization (LCP < 2.5s, FID < 100ms, CLS < 0.1)
- **Accessibility**: WCAG 2.1 AAA compliance where possible
- **SEO**: Structured data, semantic HTML, optimized meta tags
- **Cross-browser**: Support for modern browsers (ES2022+)
- **Responsive**: Mobile-first, fluid design across all devices

## 🛠️ Technology Stack & Modern Architecture

### 🔧 Core Technologies (Latest Versions)
```typescript
// Package.json dependencies (maintain latest stable versions)
{
  "next": "^15.0.0",           // App Router, Server Components, Edge Runtime
  "react": "^18.3.0",          // Concurrent features, Suspense, Error boundaries
  "typescript": "^5.6.0",      // Strict mode, path mapping, decorators
  "@tailwindcss/typography": "^0.5.15",  // Rich text styling
  "framer-motion": "^11.11.0", // Physics-based animations (selective use)
  "lenis": "^1.1.13"           // Hardware-accelerated smooth scrolling
}
```

### 🏗️ Architecture Patterns

#### 🎯 Component Architecture (Atomic Design)
```
📁 components/
├── 🔹 atoms/          # Buttons, Icons, Typography
├── 🔸 molecules/      # Cards, Forms, Navigation items
├── 🔷 organisms/      # Headers, Sections, Complex forms
├── 🔶 templates/      # Page layouts, Grid systems
└── 🔺 pages/          # Complete page compositions
```

#### 🎨 CSS Architecture (ITCSS Methodology)
```css
/* Inverted Triangle CSS - Specificity from generic to explicit */
@layer 
  settings,      /* CSS custom properties, config */
  tools,         /* Mixins, functions (if using preprocessor) */
  generic,       /* Reset, normalize, box-sizing */
  elements,      /* Bare HTML elements (h1, a, etc.) */
  objects,       /* Design patterns, layout */
  components,    /* UI components */
  utilities;     /* Single-purpose helper classes */
```

#### 🔄 State Management Strategy
```typescript
// Prefer React 18+ patterns over external state libraries
- Server State: React Server Components + Suspense
- Client State: useState, useReducer, Context (minimal)
- Form State: Native form APIs + validation
- URL State: Next.js router, searchParams
- Animation State: CSS variables + data attributes
```

### 🚀 Performance Architecture

#### ⚡ Core Web Vitals Optimization
```typescript
// Critical rendering path optimization
export const metadata: Metadata = {
  title: "Custom Woodcarving | Heritage Craftsmanship",
  description: "Bespoke woodcarving commissions...",
  viewport: "width=device-width, initial-scale=1",
  robots: "index, follow",
  alternates: {
    canonical: "https://woodcrave.com"
  }
};

// Resource hints for performance
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="dns-prefetch" href="//images.unsplash.com" />
```

#### 🎭 Rendering Strategy
```typescript
// Hybrid rendering approach
- Static: Marketing pages, portfolio (ISG when needed)
- Server: Dynamic content, user-specific data
- Client: Interactions, animations, real-time features
- Edge: Geo-specific content, A/B testing
```

### 🎨 Professional Design System

#### 🌍 Color Theory & Psychology
```css
/* Earth-tone palette with psychological impact */
:root {
  /* Primary Brand Colors - Trust & Craftsmanship */
  --accent-primary: #8B4513;      /* Saddle Brown - Heritage, reliability */
  --accent-secondary: #556B2F;    /* Dark Olive - Nature, sustainability */
  --accent-tertiary: #D2B48C;     /* Tan - Warmth, approachability */
  --accent-warm: #CD853F;         /* Peru - Luxury, craftsmanship */
  
  /* Neutral Foundation - Sophistication */
  --background: #faf9f7;          /* Warm White - Clean, premium */
  --foreground: #2d1810;          /* Espresso - Elegant, readable */
  --text-muted: #6b5b4d;          /* Muted Brown - Subtle hierarchy */
  
  /* Functional Colors */
  --surface-elevated: #ffffff;     /* Pure white - Elevation */
  --border-subtle: #e8e4da;       /* Light brown - Gentle separation */
  --shadow-color: rgba(45, 24, 16, 0.1); /* Consistent shadows */
  
  /* Wood Species Color Palette */
  --wood-oak: #E8D4AD;           /* Oak base */
  --wood-walnut: #5E4B3C;        /* Walnut richness */
  --wood-cherry: #A15843;        /* Cherry warmth */
  --wood-maple: #F5DEB3;         /* Maple lightness */
  --wood-mahogany: #C04000;      /* Mahogany depth */
  
  /* State Colors - Accessibility compliant */
  --success: #22C55E;            /* Green - 4.5:1 contrast ratio */
  --warning: #F59E0B;            /* Amber - Clear visibility */
  --error: #EF4444;              /* Red - Sufficient contrast */
  --info: #3B82F6;               /* Blue - Professional */
}

/* RGB values for alpha compositing */
:root {
  --accent-primary-rgb: 139, 69, 19;
  --accent-secondary-rgb: 85, 107, 47;
  --foreground-rgb: 45, 24, 16;
  --background-rgb: 250, 249, 247;
}
```

#### 📐 Mathematical Typography Scale
```css
/* Modular scale (1.25 - Major Third) for visual harmony */
:root {
  --font-scale-ratio: 1.25;
  
  /* Font sizes following mathematical progression */
  --font-xs: 0.75rem;      /* 12px - Captions, meta info */
  --font-sm: 0.875rem;     /* 14px - Small text, labels */
  --font-base: 1rem;       /* 16px - Body text baseline */
  --font-lg: 1.125rem;     /* 18px - Emphasized text */
  --font-xl: 1.25rem;      /* 20px - Small headings */
  --font-2xl: 1.5rem;      /* 24px - Card titles */
  --font-3xl: 1.875rem;    /* 30px - Section subheads */
  --font-4xl: 2.25rem;     /* 36px - Page headings */
  --font-5xl: 3rem;        /* 48px - Hero headings */
  --font-6xl: 3.75rem;     /* 60px - Display text */
  --font-7xl: 4.5rem;      /* 72px - Large displays */
  --font-8xl: 6rem;        /* 96px - Hero displays */
  --font-9xl: 8rem;        /* 128px - Exceptional cases */
  
  /* Line heights for optimal readability */
  --leading-tight: 1.25;    /* Headings */
  --leading-snug: 1.375;    /* Subheadings */
  --leading-normal: 1.5;    /* Body text */
  --leading-relaxed: 1.625; /* Long-form content */
  --leading-loose: 2;       /* Special emphasis */
}
```

#### 🎯 Spacing System (8px Grid)
```css
/* Consistent spatial rhythm - 8px base unit */
:root {
  --space-1: 0.25rem;   /* 4px - Fine adjustments */
  --space-2: 0.5rem;    /* 8px - Base unit */
  --space-3: 0.75rem;   /* 12px - Small gaps */
  --space-4: 1rem;      /* 16px - Standard spacing */
  --space-5: 1.25rem;   /* 20px - Medium spacing */
  --space-6: 1.5rem;    /* 24px - Section spacing */
  --space-8: 2rem;      /* 32px - Large spacing */
  --space-10: 2.5rem;   /* 40px - Extra large */
  --space-12: 3rem;     /* 48px - Section breaks */
  --space-16: 4rem;     /* 64px - Major sections */
  --space-20: 5rem;     /* 80px - Page sections */
  --space-24: 6rem;     /* 96px - Hero spacing */
  --space-32: 8rem;     /* 128px - Major breaks */
  
  /* Container widths for content strategy */
  --container-xs: 20rem;    /* 320px - Mobile */
  --container-sm: 24rem;    /* 384px - Small mobile */
  --container-md: 28rem;    /* 448px - Large mobile */
  --container-lg: 32rem;    /* 512px - Tablet */
  --container-xl: 36rem;    /* 576px - Small desktop */
  --container-2xl: 42rem;   /* 672px - Medium desktop */
  --container-3xl: 48rem;   /* 768px - Large desktop */
  --container-4xl: 56rem;   /* 896px - Extra large */
  --container-5xl: 64rem;   /* 1024px - Full content */
  --container-6xl: 72rem;   /* 1152px - Wide content */
  --container-7xl: 80rem;   /* 1280px - Maximum width */
}
```

## 🧩 Advanced Component Architecture

### 🎭 Component Design Patterns

#### 🔄 Compound Component Pattern
```typescript
// Example: Card component with composable parts
interface CardProps {
  children: React.ReactNode;
  variant?: 'elevated' | 'flat' | 'outlined';
  className?: string;
}

const Card = ({ children, variant = 'elevated', className }: CardProps) => (
  <div className={`card card--${variant} ${className}`}>
    {children}
  </div>
);

Card.Header = ({ children }: { children: React.ReactNode }) => (
  <header className="card__header">{children}</header>
);

Card.Body = ({ children }: { children: React.ReactNode }) => (
  <main className="card__body">{children}</main>
);

Card.Footer = ({ children }: { children: React.ReactNode }) => (
  <footer className="card__footer">{children}</footer>
);
```

#### 🎨 Render Props Pattern for Animation
```typescript
interface AnimatedWrapperProps {
  children: (isVisible: boolean, ref: RefObject<HTMLElement>) => React.ReactNode;
  threshold?: number;
  rootMargin?: string;
}

const AnimatedWrapper = ({ children, threshold = 0.1, rootMargin = "0px" }: AnimatedWrapperProps) => {
  const [isVisible, setIsVisible] = useState(false);
  const ref = useRef<HTMLElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => setIsVisible(entry.isIntersecting),
      { threshold, rootMargin }
    );

    if (ref.current) observer.observe(ref.current);
    return () => observer.disconnect();
  }, [threshold, rootMargin]);

  return <>{children(isVisible, ref)}</>;
};
```

### 🎨 Advanced Background System

#### 🌊 Dynamic Background Controller
```typescript
interface BackgroundConfig {
  variant: 'home' | 'portfolio' | 'about' | 'shop' | 'commission' | 'contact';
  intensity: 'subtle' | 'medium' | 'bold';
  animationSpeed: 'slow' | 'normal' | 'fast';
  colors: {
    primary: string;
    secondary: string;
    tertiary?: string;
  };
}

const backgroundConfigs: Record<string, BackgroundConfig> = {
  home: {
    variant: 'home',
    intensity: 'medium',
    animationSpeed: 'slow',
    colors: {
      primary: 'rgba(139, 69, 19, 0.08)',
      secondary: 'rgba(210, 180, 140, 0.06)',
      tertiary: 'rgba(205, 133, 63, 0.07)'
    }
  },
  portfolio: {
    variant: 'portfolio',
    intensity: 'subtle',
    animationSpeed: 'normal',
    colors: {
      primary: 'rgba(85, 107, 47, 0.06)',
      secondary: 'rgba(139, 69, 19, 0.05)'
    }
  }
};
```

#### 🎭 Critical Background Rules
```typescript
// MANDATORY: Background component structure
const BackgroundComponent = () => (
  <div 
    className="fixed inset-0 pointer-events-none"
    style={{
      zIndex: -10,                    // NEVER use -50 or lower
      opacity: 0.08,                  // Visible but subtle (0.06-0.12 range)
      transform: 'translate3d(0,0,0)', // GPU acceleration
      willChange: 'transform, opacity', // Performance hint
      backfaceVisibility: 'hidden'     // Prevent flickering
    }}
    aria-hidden="true"                // Accessibility
  >
    {/* Background content */}
  </div>
);
```

### 🎯 Z-Index Management System

#### 📚 Layering Strategy (Never Deviate)
```css
:root {
  /* Background layer */
  --z-background-far: -20;    /* Distant backgrounds */
  --z-background-near: -10;   /* Near backgrounds */
  --z-background-overlay: -5; /* Background overlays */
  
  /* Content layers */
  --z-content-base: 0;        /* Normal flow */
  --z-content-elevated: 1;    /* Cards, sections */
  --z-content-floating: 5;    /* Floating elements */
  --z-content-overlay: 10;    /* Content overlays */
  
  /* Interface layers */
  --z-interface-low: 50;      /* Sticky elements */
  --z-interface-high: 100;    /* Navigation */
  --z-interface-modal: 1000;  /* Modals, dialogs */
  --z-interface-toast: 1100;  /* Notifications */
  --z-interface-tooltip: 1200; /* Tooltips */
  --z-interface-debug: 9999;  /* Development tools */
}

/* CRITICAL: Avoid these anti-patterns */
.anti-pattern {
  z-index: 999999 !important; /* ❌ Nuclear option */
  z-index: 8 !important;      /* ❌ Too specific on generic elements */
}

/* ✅ Correct approach */
.content-section {
  z-index: var(--z-content-elevated);
  position: relative;
}
```

### 🎬 Advanced Animation Architecture

#### 🎨 CSS Animation Framework (Performance-First)
```css
/* Base animation utilities */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate3d(0, 2rem, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translate3d(-2rem, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Background-specific animations */
@keyframes subtle-float {
  0%, 100% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 0.08;
  }
  25% {
    transform: translate3d(-2px, -3px, 0) scale(1.001);
    opacity: 0.1;
  }
  50% {
    transform: translate3d(2px, 2px, 0) scale(0.999);
    opacity: 0.12;
  }
  75% {
    transform: translate3d(-1px, 3px, 0) scale(1.001);
    opacity: 0.1;
  }
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Performance-optimized classes */
.animate-fade-in-up {
  animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-slide-in-left {
  animation: slideInLeft 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-scale-in {
  animation: scaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-gradient {
  background-size: 400% 400%;
  animation: gradient-shift 15s ease infinite;
}
```

#### 🎭 Intersection Observer Animation System
```typescript
// Professional animation trigger system
interface AnimationConfig {
  threshold: number;
  rootMargin: string;
  triggerOnce: boolean;
}

const useAnimationOnScroll = (config: AnimationConfig = {
  threshold: 0.1,
  rootMargin: '0px 0px -10% 0px',
  triggerOnce: true
}) => {
  const [isVisible, setIsVisible] = useState(false);
  const ref = useRef<HTMLElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          if (config.triggerOnce) {
            observer.unobserve(entry.target);
          }
        } else if (!config.triggerOnce) {
          setIsVisible(false);
        }
      },
      {
        threshold: config.threshold,
        rootMargin: config.rootMargin
      }
    );

    const element = ref.current;
    if (element) observer.observe(element);

    return () => {
      if (element) observer.unobserve(element);
    };
  }, [config]);

  return { ref, isVisible };
};

// Usage in components
const AnimatedSection = ({ children }: { children: React.ReactNode }) => {
  const { ref, isVisible } = useAnimationOnScroll();

  return (
    <section
      ref={ref}
      className={`transition-all duration-800 ${
        isVisible ? 'animate-fade-in-up' : 'opacity-0 translate-y-8'
      }`}
    >
      {children}
    </section>
  );
};
```

#### 🎪 Data-Attribute Animation System
```typescript
// Declarative animation attributes
interface AnimationAttributes {
  'data-animate-fade-up'?: boolean;
  'data-animate-slide-left'?: boolean;
  'data-animate-slide-right'?: boolean;
  'data-animate-scale'?: boolean;
  'data-animate-fade-in'?: boolean;
  'data-animation-delay'?: number; // in milliseconds
  'data-animation-duration'?: number; // in milliseconds
}

// CSS to handle data attributes
const animationCSS = `
[data-animate-fade-up] {
  opacity: 0;
  transform: translateY(2rem);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

[data-animate-fade-up].animate-in {
  opacity: 1;
  transform: translateY(0);
}

[data-animation-delay="100"] { transition-delay: 100ms; }
[data-animation-delay="200"] { transition-delay: 200ms; }
[data-animation-delay="300"] { transition-delay: 300ms; }
[data-animation-delay="400"] { transition-delay: 400ms; }
[data-animation-delay="500"] { transition-delay: 500ms; }
`;
```

## 💼 Professional Development Standards

### 🏗️ Advanced File Structure & Organization
```
src/
├── 📁 app/                          # Next.js App Router
│   ├── 📄 layout.tsx                # Root layout with providers
│   ├── 📄 page.tsx                  # Homepage
│   ├── 📄 globals.css               # Global styles (ITCSS layers)
│   ├── 📄 not-found.tsx             # 404 error page
│   ├── 📄 error.tsx                 # Error boundary
│   ├── 📁 (marketing)/              # Route groups
│   │   ├── 📁 portfolio/
│   │   ├── 📁 about/
│   │   └── 📁 commission/
│   ├── 📁 api/                      # API routes
│   └── 📄 sitemap.ts                # SEO sitemap
├── 📁 components/                   # Reusable components
│   ├── 📁 ui/                       # Base UI components (atoms)
│   │   ├── 📄 Button.tsx
│   │   ├── 📄 Card.tsx
│   │   ├── 📄 Input.tsx
│   │   └── 📄 index.ts              # Barrel exports
│   ├── 📁 layout/                   # Layout components
│   │   ├── 📄 Header.tsx
│   │   ├── 📄 Footer.tsx
│   │   └── 📄 Navigation.tsx
│   ├── 📁 sections/                 # Page sections (organisms)
│   │   ├── 📄 HeroSection.tsx
│   │   ├── 📄 PortfolioSection.tsx
│   │   └── 📄 TestimonialsSection.tsx
│   ├── 📁 backgrounds/              # Background components
│   │   ├── 📄 SmoothBackground.tsx
│   │   ├── 📄 CleanBackground.tsx
│   │   └── 📄 HomeBackground.tsx
│   ├── 📁 animations/               # Animation components
│   │   ├── 📄 SectionMorphing.tsx
│   │   ├── 📄 ScrollAnimations.tsx
│   │   └── 📄 AnimationProvider.tsx
│   └── 📁 forms/                    # Form components
│       ├── 📄 ContactForm.tsx
│       └── 📄 CommissionForm.tsx
├── 📁 lib/                          # Utilities and configuration
│   ├── 📄 utils.ts                  # Helper functions
│   ├── 📄 constants.ts              # App constants
│   ├── 📄 types.ts                  # TypeScript types
│   ├── 📄 data.ts                   # Static data
│   ├── 📄 validations.ts            # Form validation schemas
│   └── 📄 animations.ts             # Animation utilities
├── 📁 hooks/                        # Custom React hooks
│   ├── 📄 useScrollAnimation.ts
│   ├── 📄 useIntersectionObserver.ts
│   └── 📄 useWindowSize.ts
├── 📁 styles/                       # Additional stylesheets
│   ├── 📄 components.css            # Component-specific styles
│   └── 📄 utilities.css             # Utility classes
├── 📁 public/                       # Static assets
│   ├── 📁 images/
│   ├── 📁 icons/
│   ├── 📄 favicon.ico
│   ├── 📄 manifest.json
│   └── 📄 robots.txt
└── 📁 types/                        # Global TypeScript definitions
    ├── 📄 global.d.ts
    └── 📄 components.d.ts
```

### 🎯 Component Development Patterns

#### 🧩 Component Interface Design
```typescript
// Base component props interface
interface BaseComponentProps {
  className?: string;
  children?: React.ReactNode;
  id?: string;
  'data-testid'?: string;
}

// Extended component props with strict typing
interface ButtonProps extends BaseComponentProps {
  variant: 'primary' | 'secondary' | 'outline' | 'ghost';
  size: 'sm' | 'md' | 'lg' | 'xl';
  disabled?: boolean;
  loading?: boolean;
  icon?: React.ReactNode;
  iconPosition?: 'left' | 'right';
  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;
  type?: 'button' | 'submit' | 'reset';
  fullWidth?: boolean;
  'aria-label'?: string;
}

// Implementation with proper TypeScript
const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({
    children,
    variant = 'primary',
    size = 'md',
    disabled = false,
    loading = false,
    icon,
    iconPosition = 'left',
    onClick,
    type = 'button',
    fullWidth = false,
    className = '',
    'aria-label': ariaLabel,
    ...rest
  }, ref) => {
    const baseClasses = 'btn';
    const variantClasses = `btn--${variant}`;
    const sizeClasses = `btn--${size}`;
    const widthClasses = fullWidth ? 'btn--full-width' : '';
    const loadingClasses = loading ? 'btn--loading' : '';
    
    const combinedClasses = [
      baseClasses,
      variantClasses,
      sizeClasses,
      widthClasses,
      loadingClasses,
      className
    ].filter(Boolean).join(' ');

    return (
      <button
        ref={ref}
        type={type}
        disabled={disabled || loading}
        className={combinedClasses}
        onClick={onClick}
        aria-label={ariaLabel}
        aria-disabled={disabled || loading}
        {...rest}
      >
        {loading && <LoadingSpinner size="sm" />}
        {icon && iconPosition === 'left' && !loading && (
          <span className="btn__icon btn__icon--left">{icon}</span>
        )}
        {children && <span className="btn__text">{children}</span>}
        {icon && iconPosition === 'right' && !loading && (
          <span className="btn__icon btn__icon--right">{icon}</span>
        )}
      </button>
    );
  }
);

Button.displayName = 'Button';
```

#### 🎨 Section Component Architecture
```typescript
// Standard section wrapper with all best practices
interface SectionProps extends BaseComponentProps {
  id: string; // Required for navigation
  variant?: 'default' | 'elevated' | 'contrast';
  padding?: 'sm' | 'md' | 'lg' | 'xl';
  background?: 'transparent' | 'subtle' | 'elevated';
  animate?: boolean;
  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | '2xl' | '3xl' | '4xl' | '5xl' | '6xl' | '7xl' | 'full';
}

const Section = ({
  id,
  children,
  variant = 'default',
  padding = 'xl',
  background = 'transparent',
  animate = true,
  maxWidth = '7xl',
  className = '',
  ...rest
}: SectionProps) => {
  const { ref, isVisible } = useAnimationOnScroll({
    threshold: 0.1,
    rootMargin: '0px 0px -10% 0px',
    triggerOnce: true
  });

  const sectionClasses = [
    'section',
    `section--${variant}`,
    `section--padding-${padding}`,
    `section--bg-${background}`,
    `section--max-w-${maxWidth}`,
    animate && isVisible ? 'section--animated' : '',
    className
  ].filter(Boolean).join(' ');

  return (
    <section
      id={id}
      ref={animate ? ref : undefined}
      className={sectionClasses}
      {...rest}
    >
      <div className="section__container">
        {children}
      </div>
    </section>
  );
};
```

### 🎨 Advanced CSS Methodologies

#### 🏗️ BEM + CUBE CSS Hybrid Approach
```css
/* Block-Element-Modifier with CUBE CSS composition */

/* COMPOSITION: Layout and structural styles */
.section {
  /* Layout composition */
  display: grid;
  grid-template-columns: 1fr min(var(--container-7xl), 100% - 2rem) 1fr;
  grid-template-rows: auto;
  gap: var(--space-6);
  
  /* All direct children go to the middle column */
  > * {
    grid-column: 2;
  }
  
  /* Full-bleed elements can break out */
  > .full-bleed {
    grid-column: 1 / -1;
  }
}

/* UTILITIES: Single-purpose classes */
.bg-transparent { background: transparent !important; }
.text-center { text-align: center; }
.sr-only { position: absolute; clip: rect(0,0,0,0); }

/* BLOCKS: Component-level styling */
.button {
  /* Base button styles */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: var(--border-radius-md);
  font-family: var(--font-sans);
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: all var(--transition-normal);
  position: relative;
  overflow: hidden;
}

/* ELEMENTS: Parts of components */
.button__icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.button__icon--left {
  margin-right: var(--space-2);
}

.button__icon--right {
  margin-left: var(--space-2);
}

.button__text {
  position: relative;
  z-index: 1;
}

/* MODIFIERS: Variations */
.button--primary {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-warm));
  color: var(--surface-elevated);
  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);
}

.button--primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
}

.button--outline {
  background: transparent;
  color: var(--accent-primary);
  border: 2px solid var(--accent-primary);
}

.button--lg {
  padding: var(--space-4) var(--space-6);
  font-size: var(--font-lg);
  min-height: 3.5rem;
}

.button--full-width {
  width: 100%;
}

/* EXCEPTIONS: State-based modifications */
.button--loading {
  pointer-events: none;
  opacity: 0.7;
}

.button--disabled {
  pointer-events: none;
  opacity: 0.5;
  cursor: not-allowed;
}
```

#### 🎭 CSS Custom Properties for Dynamic Theming
```css
/* Dynamic theme system with CSS custom properties */
.theme-provider {
  /* Base theme properties */
  --theme-primary: var(--accent-primary);
  --theme-secondary: var(--accent-secondary);
  --theme-surface: var(--background);
  --theme-on-surface: var(--foreground);
  
  /* Dynamic contrast calculations */
  --theme-primary-contrast: var(--surface-elevated);
  --theme-secondary-contrast: var(--surface-elevated);
  
  /* State variations */
  --theme-primary-hover: color-mix(in srgb, var(--theme-primary) 90%, black);
  --theme-primary-active: color-mix(in srgb, var(--theme-primary) 80%, black);
  --theme-primary-disabled: color-mix(in srgb, var(--theme-primary) 50%, transparent);
  
  /* Semantic color assignments */
  --color-success: #10B981;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-info: #3B82F6;
  
  /* Surface elevation system */
  --elevation-0: 0 0 0 1px rgba(0,0,0,0.05);
  --elevation-1: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
  --elevation-2: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
  --elevation-3: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
  --elevation-4: 0 20px 25px rgba(0,0,0,0.1), 0 10px 10px rgba(0,0,0,0.04);
  --elevation-5: 0 25px 50px rgba(0,0,0,0.25);
}

/* Dark theme overrides */
@media (prefers-color-scheme: dark) {
  .theme-provider {
    --theme-surface: var(--foreground);
    --theme-on-surface: var(--background);
    --theme-primary-hover: color-mix(in srgb, var(--theme-primary) 90%, white);
  }
}
```

### 🔍 Professional CSS Anti-Patterns to Avoid

#### ❌ CSS Anti-Patterns (Never Use)
```css
/* NEVER: Nuclear z-index values */
.bad-example {
  z-index: 999999 !important; /* Breaks stacking context */
}

/* NEVER: Generic element overrides */
div, span, p {
  z-index: 8 !important; /* Breaks background system */
}

/* NEVER: Hardcoded pixel values without system */
.another-bad-example {
  margin: 23px 17px 31px 9px; /* Inconsistent spacing */
}

/* NEVER: Overly specific selectors */
.page .section .container .card .header .title {
  color: red; /* Unmaintainable specificity */
}

/* NEVER: Layout styles in utility classes */
.red-button {
  background: red;
  padding: 10px;
  margin: 5px;
  display: flex; /* Mixed concerns */
}
```

#### ✅ CSS Best Practices (Always Use)
```css
/* GOOD: Systematic z-index management */
.modal {
  z-index: var(--z-interface-modal);
}

/* GOOD: Component-specific styling */
.card-header {
  position: relative;
  z-index: var(--z-content-elevated);
}

/* GOOD: Design system values */
.section {
  padding: var(--space-20) var(--space-6);
  margin-bottom: var(--space-12);
}

/* GOOD: Logical property grouping */
.button {
  /* Layout */
  display: inline-flex;
  align-items: center;
  
  /* Spacing */
  padding: var(--space-3) var(--space-6);
  
  /* Visual */
  background: var(--theme-primary);
  border-radius: var(--border-radius-md);
  
  /* Typography */
  font-family: var(--font-sans);
  font-weight: 600;
  
  /* Interaction */
  cursor: pointer;
  transition: all var(--transition-normal);
}
```

## 🚀 Performance & Optimization Excellence

### ⚡ Core Web Vitals Optimization Strategy

#### 🎯 Performance Metrics Targets
```typescript
// Performance budget and targets
const PERFORMANCE_TARGETS = {
  // Core Web Vitals
  LCP: 2.5, // Largest Contentful Paint (seconds)
  FID: 100, // First Input Delay (milliseconds)
  CLS: 0.1, // Cumulative Layout Shift (score)
  
  // Additional metrics
  FCP: 1.8, // First Contentful Paint (seconds)
  TTFB: 800, // Time to First Byte (milliseconds)
  TBT: 200, // Total Blocking Time (milliseconds)
  SI: 3.4, // Speed Index (seconds)
  
  // Resource budgets
  JS_BUNDLE_SIZE: 250, // KB (compressed)
  CSS_BUNDLE_SIZE: 100, // KB (compressed)
  IMAGE_SIZE_LIMIT: 500, // KB per image
  FONT_LOAD_TIME: 100 // milliseconds (swap period)
} as const;
```

#### 🖼️ Advanced Image Optimization
```typescript
// Professional image component with optimization
interface OptimizedImageProps {
  src: string;
  alt: string;
  width?: number;
  height?: number;
  priority?: boolean;
  quality?: number;
  placeholder?: 'blur' | 'empty';
  blurDataURL?: string;
  sizes?: string;
  className?: string;
  onLoad?: () => void;
  onError?: () => void;
}

const OptimizedImage = ({
  src,
  alt,
  width,
  height,
  priority = false,
  quality = 85,
  placeholder = 'blur',
  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',
  className = '',
  onLoad,
  onError,
  ...rest
}: OptimizedImageProps) => {
  // Generate blur placeholder for better UX
  const shimmer = (w: number, h: number) => `
    <svg width="${w}" height="${h}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <linearGradient id="g">
          <stop stop-color="#f6f7f8" offset="20%" />
          <stop stop-color="#edeef1" offset="50%" />
          <stop stop-color="#f6f7f8" offset="70%" />
        </linearGradient>
      </defs>
      <rect width="${w}" height="${h}" fill="#f6f7f8" />
      <rect id="r" width="${w}" height="${h}" fill="url(#g)" />
      <animate xlink:href="#r" attributeName="x" from="-${w}" to="${w}" dur="1s" repeatCount="indefinite"  />
    </svg>`;

  const toBase64 = (str: string) =>
    typeof window === 'undefined'
      ? Buffer.from(str).toString('base64')
      : window.btoa(str);

  return (
    <Image
      src={src}
      alt={alt}
      width={width}
      height={height}
      priority={priority}
      quality={quality}
      placeholder={placeholder}
      blurDataURL={`data:image/svg+xml;base64,${toBase64(shimmer(width || 700, height || 475))}`}
      sizes={sizes}
      className={`transition-opacity duration-300 ${className}`}
      onLoad={onLoad}
      onError={onError}
      {...rest}
    />
  );
};
```

#### 🔄 Advanced Lazy Loading Strategy
```typescript
// Intelligent component lazy loading with preloading
const createLazyComponent = <T extends ComponentType<any>>(
  importFn: () => Promise<{ default: T }>,
  options: {
    preload?: boolean;
    fallback?: ComponentType;
    errorBoundary?: ComponentType<{ error: Error }>;
  } = {}
) => {
  // Preload component on interaction or viewport entry
  let componentPromise: Promise<{ default: T }> | null = null;
  
  const preloadComponent = () => {
    if (!componentPromise) {
      componentPromise = importFn();
    }
    return componentPromise;
  };

  // Preload on mouseover for instant loading
  const handleMouseEnter = () => {
    preloadComponent();
  };

  const LazyComponent = lazy(() => {
    if (componentPromise) {
      return componentPromise;
    }
    return preloadComponent();
  });

  const WrappedComponent = (props: ComponentProps<T>) => (
    <Suspense fallback={options.fallback ? <options.fallback /> : <LoadingSpinner />}>
      <ErrorBoundary fallback={options.errorBoundary}>
        <div onMouseEnter={options.preload ? handleMouseEnter : undefined}>
          <LazyComponent {...props} />
        </div>
      </ErrorBoundary>
    </Suspense>
  );

  // Expose preload function for manual control
  WrappedComponent.preload = preloadComponent;

  return WrappedComponent;
};

// Usage examples
const HeroSection = createLazyComponent(
  () => import('./sections/HeroSection'),
  { preload: true, fallback: HeroSkeleton }
);

const PortfolioGallery = createLazyComponent(
  () => import('./sections/PortfolioGallery'),
  { preload: false, fallback: GallerySkeleton }
);
```

### 🎨 Animation Performance Optimization

#### 🏎️ GPU-Accelerated Animations
```css
/* Performance-optimized animation classes */
.gpu-accelerated {
  /* Force GPU layer creation */
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  perspective: 1000px;
  
  /* Declare animatable properties */
  will-change: transform, opacity;
}

/* Efficient transform-based animations */
@keyframes optimized-fade-up {
  from {
    opacity: 0;
    transform: translate3d(0, 2rem, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Remove will-change after animation completes */
.animation-complete {
  will-change: auto;
}
```

#### 🎭 Performance-Aware Animation Hook
```typescript
// High-performance animation management
const useOptimizedAnimation = (
  config: {
    threshold?: number;
    rootMargin?: string;
    once?: boolean;
    delay?: number;
    duration?: number;
  } = {}
) => {
  const [isVisible, setIsVisible] = useState(false);
  const [hasAnimated, setHasAnimated] = useState(false);
  const ref = useRef<HTMLElement>(null);

  useEffect(() => {
    const element = ref.current;
    if (!element) return;

    // Reduce motion for accessibility
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) {
      setIsVisible(true);
      return;
    }

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting && !hasAnimated) {
          // Add delay if specified
          if (config.delay) {
            setTimeout(() => {
              setIsVisible(true);
              setHasAnimated(true);
            }, config.delay);
          } else {
            setIsVisible(true);
            setHasAnimated(true);
          }

          // Cleanup observer if one-time animation
          if (config.once) {
            observer.unobserve(element);
          }
        }
      },
      {
        threshold: config.threshold || 0.1,
        rootMargin: config.rootMargin || '0px 0px -10% 0px'
      }
    );

    observer.observe(element);

    return () => {
      observer.disconnect();
    };
  }, [config, hasAnimated]);

  // Cleanup will-change after animation
  useEffect(() => {
    if (isVisible && ref.current) {
      const element = ref.current;
      const duration = config.duration || 800;
      
      const cleanup = setTimeout(() => {
        element.style.willChange = 'auto';
      }, duration);

      return () => clearTimeout(cleanup);
    }
  }, [isVisible, config.duration]);

  return { ref, isVisible, hasAnimated };
};
```

## Content Guidelines

### Text Content
- **Voice**: Professional, artisanal, heritage-focused
- **Tone**: Confident but not boastful, respectful of craft traditions
- **Keywords**: "masterpiece", "heirloom", "craftsmanship", "bespoke", "artisanal"

### Image Alt Text
```tsx
// Descriptive and contextual
alt="Master craftsman Edward Langston hand-carving detailed feathers on golden eagle sculpture"
```

## Debugging & Troubleshooting

### Common Issues

#### Background Not Visible
1. Check z-index conflicts in CSS
2. Verify opacity values (should be 0.06-0.12)
3. Ensure no solid backgrounds covering animations
4. Check for `!important` declarations overriding styles

#### Animation Not Working
1. Verify CSS keyframes are properly defined
2. Check for conflicting animation classes
3. Ensure proper `will-change` declarations
4. Test animation duration and easing

#### Layout Issues
1. Verify proper container classes
2. Check responsive breakpoints
3. Ensure proper z-index layering
4. Test across different viewport sizes

### Development Commands
```bash
npm run dev          # Development server
npm run build        # Production build
npm run start        # Production preview
npm run lint         # ESLint checking
```

## ♿ Accessibility & Inclusive Design Excellence

### 🎯 WCAG 2.1 AAA Compliance Standards

#### 🔍 Semantic HTML Architecture
```html
<!-- Perfect semantic structure -->
<main role="main" aria-labelledby="main-heading">
  <section aria-labelledby="hero-heading" role="banner">
    <h1 id="hero-heading">Handcrafted Heirloom Masterpieces</h1>
    <p role="doc-subtitle">37 years of woodcarving excellence</p>
  </section>
  
  <nav role="navigation" aria-label="Main navigation">
    <ul role="list">
      <li><a href="/portfolio" aria-current="page">Portfolio</a></li>
      <li><a href="/about" aria-describedby="about-tooltip">About</a></li>
    </ul>
  </nav>
  
  <article role="article" aria-labelledby="article-heading">
    <header>
      <h2 id="article-heading">Featured Commission</h2>
      <time datetime="2025-07-19" pubdate>July 19, 2025</time>
    </header>
    <figure role="img" aria-labelledby="figure-caption">
      <img src="/eagle.jpg" alt="Detailed golden eagle sculpture showing intricate feather carving and fierce expression" />
      <figcaption id="figure-caption">
        Golden eagle masterpiece commissioned for estate collection
      </figcaption>
    </figure>
  </article>
</main>
```

#### 🎮 Advanced Keyboard Navigation
```typescript
// Professional keyboard navigation hook
const useKeyboardNavigation = (
  containerRef: RefObject<HTMLElement>,
  options: {
    enableArrowKeys?: boolean;
    enableHomeEnd?: boolean;
    enablePageUpDown?: boolean;
    enableTypeAhead?: boolean;
    orientation?: 'horizontal' | 'vertical' | 'both';
    wrap?: boolean;
  } = {}
) => {
  const [focusedIndex, setFocusedIndex] = useState(0);
  const [typeAheadString, setTypeAheadString] = useState('');

  useEffect(() => {
    const container = containerRef.current;
    if (!container) return;

    const focusableElements = container.querySelectorAll<HTMLElement>(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );

    const handleKeyDown = (event: KeyboardEvent) => {
      const { key, ctrlKey, metaKey, altKey, shiftKey } = event;
      
      // Skip if modifier keys are pressed (except shift for reverse tab)
      if (ctrlKey || metaKey || altKey) return;

      switch (key) {
        case 'ArrowDown':
        case 'ArrowRight':
          if (options.enableArrowKeys !== false) {
            event.preventDefault();
            const nextIndex = options.wrap 
              ? (focusedIndex + 1) % focusableElements.length
              : Math.min(focusedIndex + 1, focusableElements.length - 1);
            setFocusedIndex(nextIndex);
            focusableElements[nextIndex]?.focus();
          }
          break;

        case 'ArrowUp':
        case 'ArrowLeft':
          if (options.enableArrowKeys !== false) {
            event.preventDefault();
            const prevIndex = options.wrap
              ? focusedIndex === 0 ? focusableElements.length - 1 : focusedIndex - 1
              : Math.max(focusedIndex - 1, 0);
            setFocusedIndex(prevIndex);
            focusableElements[prevIndex]?.focus();
          }
          break;

        case 'Home':
          if (options.enableHomeEnd !== false) {
            event.preventDefault();
            setFocusedIndex(0);
            focusableElements[0]?.focus();
          }
          break;

        case 'End':
          if (options.enableHomeEnd !== false) {
            event.preventDefault();
            const lastIndex = focusableElements.length - 1;
            setFocusedIndex(lastIndex);
            focusableElements[lastIndex]?.focus();
          }
          break;

        case 'PageUp':
          if (options.enablePageUpDown !== false) {
            event.preventDefault();
            const pageSize = Math.floor(focusableElements.length / 4);
            const newIndex = Math.max(focusedIndex - pageSize, 0);
            setFocusedIndex(newIndex);
            focusableElements[newIndex]?.focus();
          }
          break;

        case 'PageDown':
          if (options.enablePageUpDown !== false) {
            event.preventDefault();
            const pageSize = Math.floor(focusableElements.length / 4);
            const newIndex = Math.min(focusedIndex + pageSize, focusableElements.length - 1);
            setFocusedIndex(newIndex);
            focusableElements[newIndex]?.focus();
          }
          break;

        default:
          // Type-ahead functionality
          if (options.enableTypeAhead !== false && key.length === 1) {
            const newTypeAhead = typeAheadString + key.toLowerCase();
            setTypeAheadString(newTypeAhead);

            // Find matching element
            const matchingIndex = Array.from(focusableElements).findIndex(el =>
              el.textContent?.toLowerCase().startsWith(newTypeAhead)
            );

            if (matchingIndex !== -1) {
              setFocusedIndex(matchingIndex);
              focusableElements[matchingIndex]?.focus();
            }

            // Clear type-ahead after 1 second
            setTimeout(() => setTypeAheadString(''), 1000);
          }
          break;
      }
    };

    container.addEventListener('keydown', handleKeyDown);
    return () => container.removeEventListener('keydown', handleKeyDown);
  }, [containerRef, focusedIndex, typeAheadString, options]);

  return { focusedIndex, setFocusedIndex };
};
```

#### 🎨 Color Contrast & Visual Accessibility
```css
/* WCAG AAA compliant color system */
:root {
  /* Contrast ratios verified for AAA compliance (7:1 minimum) */
  --color-text-primary: #2d1810;      /* 15.8:1 contrast on white */
  --color-text-secondary: #6b5b4d;    /* 7.2:1 contrast on white */
  --color-text-inverse: #faf9f7;      /* 15.8:1 contrast on dark */
  
  /* Interactive element colors (minimum 4.5:1 for AA, 7:1 for AAA) */
  --color-link-default: #8B4513;      /* 7.1:1 contrast ratio */
  --color-link-hover: #654321;        /* 9.2:1 contrast ratio */
  --color-link-visited: #5E4B3C;      /* 8.1:1 contrast ratio */
  --color-link-focus: #CD853F;        /* 5.8:1 contrast ratio */
  
  /* State colors with sufficient contrast */
  --color-success-text: #065f46;      /* 8.5:1 contrast */
  --color-warning-text: #92400e;      /* 7.8:1 contrast */
  --color-error-text: #991b1b;        /* 9.2:1 contrast */
  --color-info-text: #1e40af;         /* 8.1:1 contrast */
  
  /* Focus indicator system */
  --focus-ring-width: 2px;
  --focus-ring-color: var(--color-link-focus);
  --focus-ring-offset: 2px;
  --focus-ring-style: solid;
}

/* Universal focus management */
*:focus {
  outline: var(--focus-ring-width) var(--focus-ring-style) var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: var(--focus-ring-width) var(--focus-ring-style) var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --color-text-primary: #000000;
    --color-text-secondary: #333333;
    --color-background: #ffffff;
    --focus-ring-width: 3px;
    --focus-ring-color: #0000ff;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  /* Maintain essential animations for UX */
  .essential-animation {
    animation-duration: 0.3s !important;
    transition-duration: 0.3s !important;
  }
}
```

#### 🔊 Screen Reader Optimization
```typescript
// Advanced screen reader utilities
const ScreenReaderUtils = {
  // Announce dynamic content changes
  announceToScreenReader: (message: string, priority: 'polite' | 'assertive' = 'polite') => {
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', priority);
    announcement.setAttribute('aria-atomic', 'true');
    announcement.className = 'sr-only';
    announcement.textContent = message;
    
    document.body.appendChild(announcement);
    
    // Remove after announcement
    setTimeout(() => {
      document.body.removeChild(announcement);
    }, 1000);
  },

  // Create descriptive alt text for complex images
  generateAltText: (imageData: {
    subject: string;
    action?: string;
    setting?: string;
    mood?: string;
    details?: string[];
  }) => {
    const { subject, action, setting, mood, details } = imageData;
    
    let altText = subject;
    if (action) altText += ` ${action}`;
    if (setting) altText += ` in ${setting}`;
    if (mood) altText += `, ${mood}`;
    if (details && details.length > 0) {
      altText += `. ${details.join(', ')}`;
    }
    
    return altText;
  },

  // Progressive enhancement for complex widgets
  enhanceForScreenReaders: (element: HTMLElement, enhancements: {
    role?: string;
    label?: string;
    description?: string;
    expanded?: boolean;
    controls?: string;
    describedBy?: string[];
  }) => {
    const { role, label, description, expanded, controls, describedBy } = enhancements;
    
    if (role) element.setAttribute('role', role);
    if (label) element.setAttribute('aria-label', label);
    if (description) element.setAttribute('aria-description', description);
    if (expanded !== undefined) element.setAttribute('aria-expanded', String(expanded));
    if (controls) element.setAttribute('aria-controls', controls);
    if (describedBy) element.setAttribute('aria-describedby', describedBy.join(' '));
  }
};

// Usage in components
const AccessibleButton = ({ children, onClick, ...props }: ButtonProps) => {
  const handleClick = (event: React.MouseEvent) => {
    onClick?.(event);
    ScreenReaderUtils.announceToScreenReader('Action completed');
  };

  return (
    <button
      onClick={handleClick}
      aria-describedby="button-help"
      {...props}
    >
      {children}
      <span id="button-help" className="sr-only">
        Press Enter or Space to activate
      </span>
    </button>
  );
};
```

## 🧪 Testing Excellence & Quality Assurance

### 🎯 Comprehensive Testing Strategy

#### 🔬 Unit Testing with Jest & React Testing Library
```typescript
// Professional component testing patterns
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { axe, toHaveNoViolations } from 'jest-axe';
import userEvent from '@testing-library/user-event';
import { SmoothBackground } from './SmoothBackground';

expect.extend(toHaveNoViolations);

describe('SmoothBackground Component', () => {
  const defaultProps = {
    pattern: 'wood-grain',
    opacity: 0.1,
    speed: 'slow' as const
  };

  // Rendering Tests
  it('renders with correct accessibility attributes', () => {
    render(<SmoothBackground {...defaultProps} />);
    
    const backgroundElement = screen.getByRole('img', { hidden: true });
    expect(backgroundElement).toHaveAttribute('aria-hidden', 'true');
    expect(backgroundElement).toHaveAttribute('data-testid', 'smooth-background');
  });

  // Accessibility Testing
  it('should not have accessibility violations', async () => {
    const { container } = render(<SmoothBackground {...defaultProps} />);
    const results = await axe(container);
    expect(results).toHaveNoViolations();
  });

  // Animation Performance Testing
  it('applies GPU acceleration classes', () => {
    render(<SmoothBackground {...defaultProps} />);
    const element = screen.getByTestId('smooth-background');
    expect(element).toHaveClass('gpu-accelerated');
    expect(element).toHaveStyle('will-change: transform, opacity');
  });

  // Responsive Behavior Testing
  it('adapts animation speed on mobile devices', () => {
    // Mock mobile device
    Object.defineProperty(window, 'matchMedia', {
      writable: true,
      value: jest.fn().mockImplementation(query => ({
        matches: query === '(hover: none) and (pointer: coarse)',
        media: query,
        onchange: null,
        addListener: jest.fn(),
        removeListener: jest.fn(),
        addEventListener: jest.fn(),
        removeEventListener: jest.fn(),
        dispatchEvent: jest.fn(),
      })),
    });

    render(<SmoothBackground {...defaultProps} speed="fast" />);
    const element = screen.getByTestId('smooth-background');
    expect(element).toHaveClass('animation-mobile-optimized');
  });

  // Reduced Motion Support Testing
  it('respects prefers-reduced-motion', () => {
    Object.defineProperty(window, 'matchMedia', {
      writable: true,
      value: jest.fn().mockImplementation(query => ({
        matches: query === '(prefers-reduced-motion: reduce)',
        media: query,
      })),
    });

    render(<SmoothBackground {...defaultProps} />);
    const element = screen.getByTestId('smooth-background');
    expect(element).toHaveClass('motion-reduced');
  });

  // Performance Impact Testing
  it('cleans up animation resources on unmount', () => {
    const { unmount } = render(<SmoothBackground {...defaultProps} />);
    const element = screen.getByTestId('smooth-background');
    
    unmount();
    
    // Verify will-change is reset
    expect(element).not.toHaveStyle('will-change: transform, opacity');
  });
});
```

#### 🎭 Visual Regression Testing
```typescript
// Playwright visual testing for design system
import { test, expect } from '@playwright/test';

test.describe('Background Animation System', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/');
    await page.waitForLoadState('networkidle');
  });

  test('homepage background renders correctly', async ({ page }) => {
    // Wait for animations to settle
    await page.waitForTimeout(2000);
    
    // Take full page screenshot
    await expect(page).toHaveScreenshot('homepage-background.png', {
      fullPage: true,
      threshold: 0.3,
      animations: 'disabled' // Consistent screenshots
    });
  });

  test('portfolio section maintains background visibility', async ({ page }) => {
    await page.click('a[href="/portfolio"]');
    await page.waitForLoadState('networkidle');
    
    // Check background is visible behind content
    const background = page.locator('[data-testid="smooth-background"]');
    await expect(background).toBeVisible();
    
    // Verify z-index hierarchy
    const zIndex = await background.evaluate(el => 
      window.getComputedStyle(el).zIndex
    );
    expect(parseInt(zIndex)).toBeLessThan(0);
  });

  test('responsive background behavior', async ({ page }) => {
    // Test mobile viewport
    await page.setViewportSize({ width: 375, height: 812 });
    await page.reload();
    await page.waitForLoadState('networkidle');
    
    await expect(page).toHaveScreenshot('mobile-background.png', {
      threshold: 0.3
    });
    
    // Test tablet viewport  
    await page.setViewportSize({ width: 768, height: 1024 });
    await page.reload();
    await page.waitForLoadState('networkidle');
    
    await expect(page).toHaveScreenshot('tablet-background.png', {
      threshold: 0.3
    });
  });
});
```

#### 🚀 Performance Testing
```typescript
// Lighthouse CI configuration
const lighthouseConfig = {
  ci: {
    collect: {
      numberOfRuns: 3,
      settings: {
        preset: 'desktop',
        throttling: {
          rttMs: 40,
          throughputKbps: 10240,
          cpuSlowdownMultiplier: 1,
        },
      },
    },
    assert: {
      assertions: {
        'categories:performance': ['error', { minScore: 0.95 }],
        'categories:accessibility': ['error', { minScore: 1.0 }],
        'categories:best-practices': ['error', { minScore: 0.95 }],
        'categories:seo': ['error', { minScore: 1.0 }],
        
        // Core Web Vitals
        'largest-contentful-paint': ['error', { maxNumericValue: 1500 }],
        'first-input-delay': ['error', { maxNumericValue: 50 }],
        'cumulative-layout-shift': ['error', { maxNumericValue: 0.05 }],
        
        // Resource efficiency
        'unused-css-rules': ['warn', { maxLength: 2 }],
        'unused-javascript': ['warn', { maxLength: 2 }],
        'unminified-css': ['error', { maxLength: 0 }],
        'unminified-javascript': ['error', { maxLength: 0 }],
      },
    },
  },
};

// Custom performance testing utilities
const measureAnimationPerformance = async (page) => {
  return await page.evaluate(() => {
    return new Promise((resolve) => {
      const startTime = performance.now();
      let frameCount = 0;
      let lastTime = startTime;
      
      const measureFrames = () => {
        const currentTime = performance.now();
        frameCount++;
        
        if (currentTime - startTime >= 1000) {
          const fps = frameCount;
          const avgFrameTime = (currentTime - startTime) / frameCount;
          
          resolve({
            fps,
            avgFrameTime,
            duration: currentTime - startTime,
            frameCount
          });
        } else {
          requestAnimationFrame(measureFrames);
        }
      };
      
      requestAnimationFrame(measureFrames);
    });
  });
};
```

### 🔒 Security & Best Practices

#### 🛡️ Input Validation & Sanitization
```typescript
// Comprehensive input validation system
import DOMPurify from 'dompurify';
import { z } from 'zod';

// Schema-based validation for forms
const ContactFormSchema = z.object({
  name: z.string()
    .min(2, 'Name must be at least 2 characters')
    .max(100, 'Name must be less than 100 characters')
    .regex(/^[a-zA-Z\s]+$/, 'Name can only contain letters and spaces'),
    
  email: z.string()
    .email('Please enter a valid email address')
    .max(255, 'Email must be less than 255 characters')
    .transform(email => email.toLowerCase().trim()),
    
  message: z.string()
    .min(10, 'Message must be at least 10 characters')
    .max(1000, 'Message must be less than 1000 characters'),
    
  phone: z.string()
    .optional()
    .refine(val => !val || /^\+?[\d\s\-\(\)]+$/.test(val), 
      'Please enter a valid phone number'),
});

// Sanitization utilities
const SecurityUtils = {
  // Sanitize HTML content
  sanitizeHtml: (dirty: string): string => {
    return DOMPurify.sanitize(dirty, {
      ALLOWED_TAGS: ['p', 'strong', 'em', 'ul', 'ol', 'li', 'br'],
      ALLOWED_ATTR: [],
      KEEP_CONTENT: true
    });
  },

  // Validate and sanitize URL parameters
  sanitizeUrlParam: (param: unknown): string => {
    if (typeof param !== 'string') return '';
    
    // Remove any script tags or dangerous content
    return param
      .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
      .replace(/javascript:/gi, '')
      .replace(/data:/gi, '')
      .trim();
  },

  // Rate limiting for API calls
  createRateLimiter: (maxRequests: number, windowMs: number) => {
    const requests = new Map<string, number[]>();
    
    return (identifier: string): boolean => {
      const now = Date.now();
      const userRequests = requests.get(identifier) || [];
      
      // Remove old requests outside the window
      const validRequests = userRequests.filter(time => now - time < windowMs);
      
      if (validRequests.length >= maxRequests) {
        return false; // Rate limit exceeded
      }
      
      validRequests.push(now);
      requests.set(identifier, validRequests);
      return true;
    };
  },

  // Content Security Policy helpers
  generateCSPNonce: (): string => {
    const array = new Uint8Array(16);
    crypto.getRandomValues(array);
    return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');
  }
};
```

#### 🔐 Environment & Configuration Security
```typescript
// Secure environment configuration
const EnvironmentConfig = {
  // Runtime environment validation
  validateEnvironment: () => {
    const requiredEnvVars = [
      'NEXT_PUBLIC_SITE_URL',
      'EMAILJS_SERVICE_ID',
      'EMAILJS_TEMPLATE_ID',
      'EMAILJS_PUBLIC_KEY'
    ];

    const missing = requiredEnvVars.filter(key => !process.env[key]);
    
    if (missing.length > 0) {
      throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
    }
  },

  // Secure API endpoint configuration
  getApiEndpoint: (endpoint: string): string => {
    const baseUrl = process.env.NEXT_PUBLIC_API_URL || 'https://api.woodcrave.com';
    const sanitizedEndpoint = endpoint.replace(/[^a-zA-Z0-9\-\_\/]/g, '');
    return `${baseUrl}/${sanitizedEndpoint}`;
  },

  // Client-side secret management (for public keys only)
  getPublicConfig: () => ({
    siteUrl: process.env.NEXT_PUBLIC_SITE_URL,
    emailJsServiceId: process.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,
    analyticsId: process.env.NEXT_PUBLIC_GA_ID,
  }),
};

// Security headers configuration
const securityHeaders = [
  {
    key: 'X-DNS-Prefetch-Control',
    value: 'on'
  },
  {
    key: 'Strict-Transport-Security',
    value: 'max-age=63072000; includeSubDomains; preload'
  },
  {
    key: 'X-XSS-Protection',
    value: '1; mode=block'
  },
  {
    key: 'X-Frame-Options',
    value: 'DENY'
  },
  {
    key: 'X-Content-Type-Options',
    value: 'nosniff'
  },
  {
    key: 'Referrer-Policy',
    value: 'origin-when-cross-origin'
  },
  {
    key: 'Content-Security-Policy',
    value: [
      "default-src 'self'",
      "script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.emailjs.com",
      "style-src 'self' 'unsafe-inline'",
      "img-src 'self' data: https:",
      "font-src 'self' data:",
      "connect-src 'self' https://api.emailjs.com",
      "frame-src 'none'",
    ].join('; ')
  }
];
```

#### 🛡️ Component Security Patterns
```typescript
// Secure component patterns
const SecureImageComponent = ({ 
  src, 
  alt, 
  allowedDomains = ['woodcrave.com', 'images.woodcrave.com'],
  ...props 
}: SecureImageProps) => {
  // Validate image source
  const isValidSource = useMemo(() => {
    try {
      const url = new URL(src, window.location.origin);
      return allowedDomains.some(domain => 
        url.hostname === domain || url.hostname.endsWith(`.${domain}`)
      );
    } catch {
      return false;
    }
  }, [src, allowedDomains]);

  const [hasError, setHasError] = useState(false);

  if (!isValidSource) {
    console.warn(`Invalid image source: ${src}`);
    return null;
  }

  return (
    <Image
      src={src}
      alt={SecurityUtils.sanitizeHtml(alt)}
      onError={() => setHasError(true)}
      {...props}
    />
  );
};

// Secure external link component
const SecureLink = ({ 
  href, 
  children, 
  allowedDomains = [],
  ...props 
}: SecureLinkProps) => {
  const isExternal = useMemo(() => {
    try {
      const url = new URL(href, window.location.origin);
      return url.hostname !== window.location.hostname;
    } catch {
      return false;
    }
  }, [href]);

  const isAllowed = useMemo(() => {
    if (!isExternal) return true;
    
    try {
      const url = new URL(href);
      return allowedDomains.some(domain => 
        url.hostname === domain || url.hostname.endsWith(`.${domain}`)
      );
    } catch {
      return false;
    }
  }, [href, isExternal, allowedDomains]);

  if (!isAllowed) {
    return <span>{children}</span>;
  }

  return (
    <a
      href={href}
      target={isExternal ? '_blank' : undefined}
      rel={isExternal ? 'noopener noreferrer' : undefined}
      {...props}
    >
      {children}
    </a>
  );
};
```

## File Naming Conventions

### Components
- PascalCase: `HomeBackground.tsx`
- Descriptive and specific: `SmoothBackground.tsx` not `Background.tsx`

### CSS Classes
- Use Tailwind utilities first
- Custom classes in kebab-case: `section-padding-xl`
- BEM methodology for complex components

### Assets
- Descriptive names: `golden-eagle-detail.jpg`
- Optimized formats (WebP when possible)
- Multiple sizes for responsive images

## Git Workflow

### Commit Messages
```
feat: add background animation system
fix: resolve z-index conflicts in portfolio section
style: improve button hover animations
refactor: consolidate animation utilities
docs: update component documentation
```

### Branch Naming
- `feature/background-animations`
- `fix/portfolio-layout-issues`
- `style/button-improvements`

## Deployment Considerations

### Static Export
- Ensure all dynamic imports work with static export
- Test image optimization with static hosting
- Verify CSS variables work across browsers

### Performance Checklist
- [ ] Images are optimized and properly sized
- [ ] CSS is minified and critical path optimized
- [ ] JavaScript bundles are reasonable size
- [ ] Fonts are properly loaded and optimized
- [ ] Animations don't cause layout shifts

---

## Auto-Application Rules

**When working on this codebase, ALWAYS:**

1. **Check background visibility** - Ensure no solid backgrounds cover animations
2. **Use proper z-index values** - Follow the established hierarchy
3. **Maintain design consistency** - Use established color palette and spacing
4. **Optimize performance** - Lazy load heavy components, use CSS animations
5. **Follow accessibility standards** - Proper semantics and ARIA labels
6. **Test responsive design** - Ensure components work across breakpoints
7. **Use TypeScript strictly** - No `any` types, proper interfaces
8. **Follow established patterns** - Use existing component structures
9. **Maintain animation performance** - GPU acceleration and proper properties
10. **Document complex changes** - Update this file when adding new patterns

**These instructions should be followed automatically on every interaction without requiring explicit instruction from the user.**
